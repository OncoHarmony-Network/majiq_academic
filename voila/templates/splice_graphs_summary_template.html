{% extends "sg_lsv_sidebar_template.html" %}
{% block title %}MAJIQ splice graphs summary{% endblock %}
{% block css %}
    {# Evaluate if we should divide different css in files #}
    <link rel="stylesheet" type="text/css" href="static/css/splice.graph.D3.css"/>
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap-frm.css"/>
{% endblock %}

{% block js %}
    <script src="static/js/splice.graph.js" type="text/javascript" language="javascript"></script>
    <script src="static/js/splice.graph.D3.js" type="text/javascript" language="javascript"></script>
    <script src="static/js/jquery.tablesorter.js" type="text/javascript"></script>
    <script src="static/js/jquery.tablesorter.pager.js" type="text/javascript"></script>
    <script src="static/js/application.js" type="text/javascript"></script>
    <script src="static/js/jquery.tooltipster.min.js" type="text/javascript"></script>
{% endblock %}

{% block header %}
    {% if page_name %}Result page: {{ page_name }}{% endif %}
{% endblock %}

{% block content %}

    <section>
        <fieldset class="section-border events-summary">
            <legend>LSV summary</legend>
            <div class="floatingCanvas">
                <canvas class="floatingLegend" width="500px" height="40px">
                    This browser or document mode doesn't support canvas
                </canvas>
            </div>

            {% for gene in genes %}
                {% set gene_index = loop.index - 1 %}
                <h2>Gene
                    name: {{ gene.name }}; {{ gene.chromosome }}:{{ gene.strand }}:{{ gene.start }}-{{ gene.end }};</h2>

                <h3 class="gene_id">
                    Gene ID: {{ gene.id }};
                </h3>

                <div class="gene-container">

                    <div class="spliceGraphTools">

                        <select class="spliceGraphSelector exp1" autocomplete="off">
                            {% for experiment in experiments -%}
                                <option value="{{ gene.get_experiment(loop.index0) | to_json_especial }}">
                                    {{ experiment }}
                                </option>
                            {%- endfor %}
                        </select>

                        <img class="toogleScale scaled" src="static/img/icons/solve-icon.png"
                             title="Change between scaled view and a view where introns are trimmed"/>
                        <img class="zoomInSplice" src="static/img/zoom_in.png" title="Zoom in" alt=""/>
                        <img class="zoomOutSplice" src="static/img/zoom_out.png" title="Zoom out" alt=""/>
                        <img class="zoomResetSplice" src="static/img/undo.png" title="Zoom reset" alt=""/>
                        <div class="tooltipD3"><strong>Coordinates: </strong><span
                                class="coordsLabel">-</span>;<strong>
                            Length: </strong><span class="lengthLabel">-;</span></div>

                    </div>

                    <div class="splice-div-container">
                        <div class="spliceDiv exp1" id="spliceDivExp1_{{ gene_index }}"
                             data-exon-list="{{ gene.get_experiment(0) | to_json_especial }}">

                        </div>
                    </div>

                    <table id="event_table{{ loop.index }}" class="tablesorter hidden">
                        <thead>
                        <tr>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td></td>
                        </tr>
                        </tbody>
                    </table>

                </div>

            {% endfor %}

        </fieldset>
    </section>
{% endblock %}

