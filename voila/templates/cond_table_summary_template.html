{% extends "base_template.html" %}
{% block title %}LSV &Delta;&Psi; Comparison table {{ cond_pair[0] }} Vs {{ cond_pair[1] }}{% endblock %}
{% block header %}LSV &Delta;&Psi; &gt; {{ thres }} Comparison table {{ cond_pair[0] }} Vs
    {{ cond_pair[1] }}{% endblock %}


{% block js %}
    <script src="static/js/splice.graph.js" type="text/javascript" language="javascript"></script>
    <script src="static/js/jquery.tablesorter.js" type="text/javascript"></script>
    <script src="static/js/jquery.tablesorter.pager.js" type="text/javascript"></script>
    <script src="static/js/jquery.mousewheel.js" type="text/javascript"></script>
    <script src="static/js/application.js" type="text/javascript"></script>
    <script type="text/javascript" src="static/js/jquery.tooltipster.min.js"></script>
{% endblock %}


{% block content %}
    <table class="tablesorter">
        <thead>
        <tr>
            <th class="short-header">Gene</th>
            <th class="short-header">LSV ID</th>
            <th class="medium-header">#Disagreeing</th>
            <th class="medium-header">#Agreeing</th>
            <th class="medium-header">#Changing</th>
            {% for sample_name in sample_names %}
                <th class="medium-header" title="{{ sample_name.full }}">{{ sample_name.truncated }}</th>
            {%- endfor %}
        </tr>
        </thead>
        <tfoot>
        <tr>
            <th class="short-header">Gene</th>
            <th class="short-header">LSV ID</th>
            <th class="medium-header">#Disagreeing</th>
            <th class="medium-header">#Agreeing</th>
            <th class="medium-header">#Changing</th>
            {% for sample_name in sample_names %}
                <th class="medium-header" title="{{ sample_name.full }}">{{ sample_name.truncated }}</th>
            {%- endfor %}
        </tr>
        </tfoot>
        <tbody>
        {% for lsv in lsvs.keys() -%}
            <tr>
                <td>{{ lsvs[lsv]['gene'] }}</td>
                <td>{{ lsv }}</td>
                <td>{{ lsvs[lsv]['ndisagree'] }}</td>
                <td>{{ lsvs[lsv]['nagree'] }}</td>
                <td>{{ lsvs[lsv]['nchangs'] }}</td>
                {% for sample_name in sample_names -%}
                    {% if lsvs[lsv]['expecs'][loop.index0] > -1 %}
                        {% if lsvs[lsv]['expecs_marks'][loop.index0] %}
                            <td class="njunc-bg-{{ lsvs[lsv]['njunc'] }} junc-changed">
                                {% else %}
                            <td class="njunc-bg-{{ lsvs[lsv]['njunc'] }}">
                        {% endif %}
                    <a href="{{ lsvs[lsv]['links'][loop.index0] }}" target="_blank"
                       class="njunc-text">{{ lsvs[lsv]['expecs'][loop.index0]|round(3) }}</a>
                    <span class="arrow-down">{% if (lsvs[lsv]['expecs'][loop.index0] | abs ) < thres %}
                        &#8659;{%- endif %}</span>
                    {% else %}
                        <td>
                    {%- endif %}
                </td>
                {%- endfor %}
            </tr>
        {%- endfor %}
        </tbody>
    </table>

    <div class="pager">
        <form>
            <img src="static/img/icons/first.png" class="first"/>
            <img src="static/img/icons/prev.png" class="prev"/>
            <input type="text" class="pagedisplay"/>
            <img src="static/img/icons/next.png" class="next"/>
            <img src="static/img/icons/last.png" class="last"/>
            <select class="pagesize" autocomplete="off">
                {% for mark in tableMarks -%}
                    {% if loop.first %}
                        <option selected="selected" value="{{ mark }}">{{ mark }}</option>
                    {% else %}
                        <option value="{{ mark }}">{{ mark }}</option>
                    {% endif %}
                {%- endfor %}
                <option value="{{ lsvs.keys()|length }}">All</option>
            </select>
        </form>
    </div>
{% endblock %}